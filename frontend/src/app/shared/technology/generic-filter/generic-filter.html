<div class="generic-filter">
  <button
    class="filter-button filter-item"
    [class.active]="hasSelection() && showActiveBorder()"
    (click)="toggleFilter()"
    type="button">
    {{ placeholder() }}
    @if (selectedCount() > 0) {
      <span class="count text-accent">({{ selectedCount() }})</span>
    }
  </button>

  @if (isOpen()) {
    <div class="filter-menu">
      <div class="options">
        @for (option of internalOptions(); track option.value) {
          <label class="option">
            <input
              type="checkbox"
              [checked]="option.checked"
              (change)="toggleOption(option)">
            <span class="checkbox-custom"></span>
            <span class="label filter-item">{{ option.label }}</span>
          </label>
        }
      </div>

      <div class="actions">
        <button type="button" class="clear-btn clear-button" (click)="clearSelection()">
          Clear
        </button>
        <button type="button" class="apply-btn clear-button" (click)="applySelection()">
          Apply
        </button>
      </div>
    </div>
  }
</div>
